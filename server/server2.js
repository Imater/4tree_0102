// Generated by CoffeeScript 1.6.3
(function() {
  var app, cluster, express, i, numCPUs, worker, _i;

  numCPUs = require('os').cpus().length;

  cluster = require('cluster');

  if (cluster.isMaster) {
    console.info('im master');
    numCPUs = 0;
    for (i = _i = 0; 0 <= numCPUs ? _i <= numCPUs : _i >= numCPUs; i = 0 <= numCPUs ? ++_i : --_i) {
      worker = cluster.fork();
    }
  } else {
    express = require('express');
    console.info('im slave');
    app = express();
    app.get('/api', function(request, response) {
      return console.info('UPS!');
    });
    app.get('/hello.txt', function(req, res) {
      var body;
      body = 'Hello World';
      res.setHeader('Content-Type', 'text/plain');
      res.setHeader('Content-Length', Buffer.byteLength(body));
      return res.end(body);
    });
    app.listen(8888);
    console.log('Listening on port 8888');
  }

}).call(this);
